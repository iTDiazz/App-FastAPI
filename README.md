# App-FastAPI
Второй репозиторий по FastAPI, Да да, становлюсь Бэкендером, не простой путь...

1. **`from datetime import datetime`**: Импортируем класс `datetime` для работы с датой и временем.
2. **`from typing import List, Optional`**: Импортируем типы данных `List` и `Optional` для аннотации типов.
3. **`from fastapi import FastAPI, HTTPException`**: Импортируем `FastAPI` для создания приложения и `HTTPException` для обработки ошибок.
4. **`from pydantic import BaseModel, Field`**: Импортируем `BaseModel` для валидации данных и `Field` для дополнительных настроек полей.
5. **`app = FastAPI(title='Trading App')`**: Создаем экземпляр приложения FastAPI с заголовком "Trading App".

6. **`fake_users = [...]`**: Создаем список фейковых пользователей, каждый из которых представлен словарем с данными.
  
7. **`class Degree(BaseModel):`**: Создаем Pydantic-модель `Degree` для валидации данных о степени.
    - **`id: int`**: Идентификатор степени.
    - **`created_at: datetime`**: Время создания.
    - **`type_degree: str`**: Тип степени.

8. **`class User(BaseModel):`**: Создаем Pydantic-модель `User` для валидации данных пользователя.
    - **`id: int`**: Идентификатор пользователя.
    - **`role: str`**: Роль пользователя.
    - **`name: str`**: Имя пользователя.
    - **`degree: Optional[List[Degree]] = None`**: Список степеней пользователя (по умолчанию `None`).

9. **`@app.get("/users/{user_id}", response_model=User)`**: Определяем GET-эндпоинт для получения пользователя по `user_id`.
    - **`async def get_user(user_id: int):`**: Асинхронная функция для получения пользователя.
    - **`user = next(...)`**: Ищем пользователя по `user_id`.
    - **`if user is None:`**: Если пользователь не найден, выбрасываем исключение с кодом 404.
    - **`return user`**: Возвращаем найденного пользователя.

10. **`fake_trades = [...]`**: Создаем список фейковых торговых операций, каждая из которых представлена словарем.

11. **`class Trade(BaseModel):`**: Создаем Pydantic-модель `Trade` для валидации данных о торговой операции.
    - **`id: int`**: Идентификатор операции.
    - **`user_id: int`**: Идентификатор пользователя.
    - **`currency: str = Field(max_length=8)`**: Валюта с ограничением длины до 8 символов.
    - **`side: str`**: Сторона сделки (покупка или продажа).
    - **`price: float = Field(ge=0)`**: Цена с ограничением, чтобы не была отрицательной.
    - **`amount: float`**: Количество.

12. **`@app.post('/trades')`**: Определяем POST-эндпоинт для добавления новых торговых операций.
    - **`async def add_trades(trades: List[Trade]):`**: Асинхронная функция для добавления торговых операций.
    - **`fake_trades.extend(trades)`**: Добавляем новые операции в список.
    - **`return {'status': 200, 'data': fake_trades}`**: Возвращаем статус 200 и обновленный список операций.
